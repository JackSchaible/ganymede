<mat-autocomplete #spellClassAC="matAutocomplete">
  <mat-option *ngFor="let class of spellClasses" [value]="class">
    {{class}}
  </mat-option>
</mat-autocomplete>
<mat-autocomplete #spellAC="matAutocomplete">
  <mat-option *ngFor="let spell of spells" [value]="spell.Name">
    {{spell.Name}}
  </mat-option>
</mat-autocomplete>
<mat-autocomplete #spellAbilityAC="matAutocomplete">
  <mat-option *ngFor="let ability of ['Intelligence', 'Wisdom', 'Charisma']" [value]="ability">
    {{ability}}
  </mat-option>
</mat-autocomplete>

<div class="u-flex u-flex__wrap">
  <form [formGroup]="formGroup" class="col-md-6">
    <input autocomplete="false" name="hidden" type="text" style="display:none;">
    <mat-accordion>
      <!--Traits-->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Traits
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="u-margin-bottom-2x">
          <mat-chip-list>
            <mat-chip *ngFor="let t of monster.Traits.Traits" (click)="showTrait(t)" (removed)="removeTrait(t.Name)">
              {{t.Name}} <i class="fa fa-times-circle" matChipRemove></i></mat-chip>
          </mat-chip-list>
        </div>

        <div>
          <mat-form-field class="col-12">
            <input matInput placeholder="Name" formControlName="trait_name">
          </mat-form-field>

          <mat-form-field class="col-12">
            <textarea rows="4" matInput placeholder="Description" formControlName="trait_desc"></textarea>
          </mat-form-field>

          <div class="col-12 u-flex u-flex__justify--flex-end">
            <button mat-button matSuffix mat-icon-button class="pull-right" (click)="addTrait()">
              <i class="fa fa-plus"></i>
            </button>
          </div>
        </div>

      </mat-expansion-panel>

      <!--Spells-->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Spells
          </mat-panel-title>
        </mat-expansion-panel-header>

        <mat-radio-group class="u-flex u-flex__justify--space-between">
          <mat-radio-button [checked]="spellcastingType==='none'" (change)="spellcastingType='none'" value="none">None</mat-radio-button>
          <mat-radio-button [checked]="spellcastingType==='innate'" (change)="spellcastingType='innate'" value="innate">Innate</mat-radio-button>
          <mat-radio-button [checked]="spellcastingType==='spellcasting'" (change)="spellcastingType='spellcasting'"
            value="spellcasting">Spellcasting</mat-radio-button>
          <mat-radio-button [checked]="spellcastingType==='psionic'" (change)="spellcastingType='psionic'" value="psionic">Psionics</mat-radio-button>
        </mat-radio-group>

        <div *ngIf="spellcastingType === 'spellcasting'">
          <mat-form-field class="col-4">
            <input matInput placeholder="Spellcasting Class" [(ngModel)]="monster.Traits.Spells.Class" formControlName="spellClass"
              [matAutocomplete]="spellClassAC">
          </mat-form-field>

          <mat-form-field class="col-4">
            <input matInput placeholder="Spellcasting Level" [(ngModel)]="monster.Traits.Spells.Level" formControlName="spellLevel"
              type="number">
          </mat-form-field>

          <mat-form-field class="col-4">
            <input matInput placeholder="Spellcasting Ability" [(ngModel)]="monster.Traits.Spells.Ability"
              formControlName="spellAbility" [matAutocomplete]="spellAbilityAC">
          </mat-form-field>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </form>

  <gm-monster-card class="col-md-6" [monster]="monster"></gm-monster-card>
</div>